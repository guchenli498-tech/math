# Problem D 数据分析和需求清单

## 一、现有数据分析

### 1.1 已有数据文件
- ✅ **DSNY_Districts_20251026.csv** (7330列，75行)
  - 包含所有DSNY区域的地理信息
  - 关键列：DISTRICT, DISTRICTCODE, OBJECTID, SHAPE_Area, SHAPE_Length, multipolygon
  - 包含曼哈顿区域（MN01-MN12）和其他区域

- ✅ **map.png** - 区域地图可视化
- ✅ **Open-Data-Dictionary-DSNY-Districts-2024-01-30.xlsx** - 数据字典

### 1.2 现有数据能提供什么
- ✅ 曼哈顿12个卫生区（MN01-MN12）的地理边界
- ✅ 各区域的面积（SHAPE_Area，平方英尺）
- ✅ 各区域的周长/长度（SHAPE_Length，英尺）
- ✅ 地理坐标信息（multipolygon列）

### 1.3 现有数据的局限性
- ❌ **没有垃圾产生量数据** - 无法知道各区域产生多少垃圾
- ❌ **没有人口/建筑数据** - 无法评估需求
- ❌ **没有当前收集频率数据** - 不知道现在怎么收集的
- ❌ **没有老鼠数据** - 无法分析老鼠问题
- ❌ **没有社会经济数据** - 无法评估公平性
- ❌ **没有街道网络数据** - 无法做路径规划
- ❌ **没有卡车数据** - 不知道现有卡车数量和位置

---

## 二、必需数据清单（按优先级）

### 🔴 **高优先级 - 核心建模必需**

#### 1. 垃圾产生量数据
**用途**：确定各区域需要收集的垃圾量，计算收集频率需求

**需要的数据**：
- [ ] 曼哈顿各区域（MN01-MN12）每日/每周垃圾产生量（磅或吨）
- [ ] 各区域住宅建筑数量
- [ ] 各区域人口密度或居民数量
- [ ] 垃圾产生量随时间的变化（季节性、周内变化）

**数据来源**：
- NYC Open Data: `DSNY Monthly Tonnage Data`
- NYC Open Data: `DSNY Waste Characterization Study`
- 美国人口普查局：住宅建筑数据

#### 2. 当前收集调度数据
**用途**：了解现状，作为优化基准

**需要的数据**：
- [ ] 各区域当前收集频率（每周几次）
- [ ] 各区域收集时间窗口（早上7-8点 vs 晚上6-7点）
- [ ] 当前收集路线
- [ ] 当前使用的卡车数量

**数据来源**：
- DSNY官方数据
- NYC Open Data: `DSNY Collection Routes`

#### 3. 老鼠相关数据
**用途**：任务4 - 分析垃圾与老鼠的关系

**需要的数据**：
- [ ] 各区域老鼠投诉数量（311服务请求）
- [ ] 老鼠目击/活动数据
- [ ] 垃圾暴露时间与老鼠投诉的相关性数据

**数据来源**：
- NYC Open Data: `311 Service Requests` (筛选"Rodent"相关)
- NYC Health Department: Rodent Inspection Data

#### 4. 社会经济数据（公平性分析）
**用途**：任务2 - 评估公平性，识别需要优先关注的区域

**需要的数据**：
- [ ] 各区域收入中位数
- [ ] 各区域贫困率
- [ ] 各区域人口密度
- [ ] 各区域住房类型（1-9单元建筑比例）

**数据来源**：
- 美国人口普查局：American Community Survey (ACS)
- NYC Open Data: `NYC Census Data`

---

### 🟡 **中优先级 - 提升模型质量**

#### 5. 街道网络数据
**用途**：路径规划，计算行驶距离和时间

**需要的数据**：
- [ ] 曼哈顿街道网络（节点和边）
- [ ] 街道宽度（识别狭窄街道）
- [ ] 交通流量数据（影响行驶时间）
- [ ] 停车限制数据

**数据来源**：
- OpenStreetMap (OSM) - 通过osmnx库下载
- NYC Open Data: `NYC Street Centerline`

#### 6. 卡车和车队数据
**用途**：资源分配，计算所需卡车数量

**需要的数据**：
- [ ] 卡车容量（12吨/车）
- [ ] 卡车平均速度
- [ ] 每站收集时间
- [ ] 卡车维护/故障率

**数据来源**：
- DSNY官方报告
- 问题描述中已提供部分信息

#### 7. 政策变化数据
**用途**：任务5 - 分析垃圾桶政策影响

**需要的数据**：
- [ ] 曼哈顿1-9单元住宅建筑数量和分布
- [ ] 当前垃圾桶使用率
- [ ] 垃圾桶对收集效率的影响（收集时间减少比例）

**数据来源**：
- NYC Department of Buildings: `Building Data`
- DSNY政策文件

---

### 🟢 **低优先级 - 增强分析深度**

#### 8. 中断场景数据
**用途**：任务3 - 鲁棒性分析

**需要的数据**：
- [ ] 历史天气数据（影响收集的天数）
- [ ] 节假日日历
- [ ] 车辆故障率统计
- [ ] 垃圾量激增事件（如大型活动）

**数据来源**：
- 天气API（如NOAA）
- DSNY历史运营数据

#### 9. 时间序列数据
**用途**：预测和动态调度

**需要的数据**：
- [ ] 垃圾产生量的历史趋势
- [ ] 季节性变化模式
- [ ] 周内变化模式（周末vs工作日）

---

## 三、数据获取策略

### 3.1 立即可以获取的数据（NYC Open Data）

1. **311服务请求 - 老鼠投诉**
   - URL: `https://data.cityofnewyork.us/Social-Services/311-Service-Requests-from-2010-to-Present/erm2-nwe9`
   - 筛选条件：Complaint Type包含"Rodent"，Location在曼哈顿

2. **人口普查数据**
   - URL: `https://data.cityofnewyork.us/City-Government/Census-Demographics-at-the-Neighborhood-Tabulation-Area/37yn-6x8y`
   - 需要映射到DSNY区域

3. **建筑数据**
   - URL: `https://data.cityofnewyork.us/Housing-Development/Building-Footprints/nqwf-w8eh`
   - 筛选1-9单元住宅建筑

4. **DSNY月度垃圾量数据**
   - 搜索"DSNY tonnage"或"waste collection"

### 3.2 需要处理的数据

- **地理空间数据**：需要将不同数据源的地理边界（人口普查区、社区等）映射到DSNY区域（MN01-MN12）
- **时间序列数据**：需要聚合到区域级别
- **缺失数据**：某些区域可能数据不完整，需要插值或估计

---

## 四、数据预处理需求

### 4.1 地理空间处理
- [ ] 将人口普查区映射到DSNY区域
- [ ] 将311投诉位置映射到DSNY区域
- [ ] 计算各区域中心点坐标
- [ ] 提取街道网络（使用osmnx）

### 4.2 数据清洗
- [ ] 处理缺失值
- [ ] 处理异常值
- [ ] 统一数据格式和单位
- [ ] 时间序列对齐

### 4.3 数据聚合
- [ ] 按DSNY区域聚合所有数据
- [ ] 计算区域级别的统计指标
- [ ] 创建区域特征矩阵

---

## 五、最小可行数据集（MVP）

如果时间有限，至少需要以下数据才能开始建模：

### 必需（5个数据集）：
1. ✅ DSNY区域地理数据（已有）
2. ⚠️ 各区域垃圾产生量（估算或查找）
3. ⚠️ 各区域人口/建筑数量（人口普查数据）
4. ⚠️ 老鼠投诉数据（311数据）
5. ⚠️ 社会经济指标（收入/贫困率）

### 可选但强烈推荐：
6. 街道网络数据
7. 当前收集频率数据

---

## 六、数据获取时间估算

- **快速获取（1-2小时）**：311老鼠投诉数据、人口普查数据
- **中等难度（半天）**：建筑数据、街道网络数据
- **困难（1-2天）**：DSNY内部数据（可能需要估算或使用公开报告）

---

## 七、下一步行动

### 立即开始：
1. ✅ 分析现有CSV数据，提取曼哈顿12个区域信息
2. ⚠️ 访问NYC Open Data，下载311老鼠投诉数据
3. ⚠️ 下载人口普查数据，映射到DSNY区域
4. ⚠️ 下载建筑数据，统计1-9单元建筑

### 并行进行：
- 建立基础优化模型框架
- 设计评估指标
- 开始文献调研

---

## 八、数据质量检查清单

获取数据后，需要检查：
- [ ] 数据完整性（是否有缺失区域）
- [ ] 数据时效性（是否是最新的）
- [ ] 数据一致性（不同来源的数据是否匹配）
- [ ] 地理边界匹配（能否正确映射到MN01-MN12）
- [ ] 单位统一（磅vs吨，平方英尺vs平方米等）

---

**建议：先获取高优先级数据，建立基础模型，再逐步完善数据。**

